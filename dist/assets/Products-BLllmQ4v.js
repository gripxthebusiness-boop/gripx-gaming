var z=Object.defineProperty,E=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var S=(l,a,s)=>a in l?z(l,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[a]=s,v=(l,a)=>{for(var s in a||(a={}))T.call(a,s)&&S(l,s,a[s]);if(C)for(var s of C(a))q.call(a,s)&&S(l,s,a[s]);return l},w=(l,a)=>E(l,$(a));var P=(l,a,s)=>new Promise((u,g)=>{var o=n=>{try{x(s.next(n))}catch(d){g(d)}},p=n=>{try{x(s.throw(n))}catch(d){g(d)}},x=n=>n.done?u(n.value):Promise.resolve(n.value).then(o,p);x((s=s.apply(l,a)).next())});import{u as D,j as t,m as y,S as R}from"./index-g0QaOA0e.js";import{b as k,L as U}from"./react-router-CN85jjlX.js";import{u as B,C as G}from"./chevron-left-corZlE2-.js";import{L as K,C as M}from"./LazyImage-YG6qT334.js";function W(){const[a,s]=k.useState("All"),[u,g]=k.useState({}),[o,p]=k.useState(1),{addToCart:x}=D(),{data:n,isLoading:d,error:f,isFetching:A}=B({queryKey:["products",a,o],queryFn:()=>P(null,null,function*(){const e=new URLSearchParams({page:o.toString(),limit:"9"});a!=="All"&&e.append("category",a);const i=yield fetch(`/products?${e}`);if(!i.ok)throw new Error("Failed to fetch products");return i.json()}),staleTime:300*1e3}),j=(n==null?void 0:n.products)||[],c=n==null?void 0:n.pagination,I=(e,i)=>{g(r=>w(v({},r),{[e]:((r[e]||0)+1)%i.length}))},L=(e,i)=>{g(r=>w(v({},r),{[e]:r[e]===0?i.length-1:(r[e]||0)-1}))},_=["All","Smartphones","Laptops","Tablets","Accessories"],N=e=>{p(e),window.scrollTo({top:0,behavior:"smooth"})},F=e=>{s(e),p(1)};return d&&!n?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-cyan-400",children:"Loading products..."})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black pt-24 pb-12",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[t.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:[t.jsxs("h1",{className:"text-5xl font-bold text-white mb-4",children:[t.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-600",children:"Premium"})," ","Gaming Gear"]}),t.jsx("p",{className:"text-gray-400 text-lg",children:"Curated gaming gear from trusted brands in India"})]}),f&&t.jsx("div",{className:"mb-6 px-4 py-3 rounded-lg border border-red-500/40 bg-red-500/10 text-red-200",children:f instanceof Error?f.message:"Unable to load products right now."}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-wrap gap-4 mb-12",children:_.map(e=>t.jsx("button",{onClick:()=>F(e),className:`px-6 py-2 rounded-lg transition-all ${a===e?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"bg-gray-900 text-gray-400 border border-cyan-500/20 hover:border-cyan-500/50"}`,children:e},e))}),A&&t.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4 px-4 py-2 rounded-lg bg-cyan-500/10 text-cyan-400 text-center",children:"Updating products..."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[j.map((e,i)=>{var m;const r=u[e._id]||0,b=((m=e.images)==null?void 0:m[r])||"";return t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.05},className:"group",children:t.jsxs(U,{to:`/products/${e._id}`,className:"block relative overflow-hidden rounded-xl bg-gradient-to-br from-gray-900 to-black border border-cyan-500/20 hover:border-cyan-500/50 transition-all",children:[t.jsxs("div",{className:"relative h-64 overflow-hidden",children:[t.jsx(K,{src:b,alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.images.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:h=>{h.preventDefault(),L(e._id,e.images)},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 p-2 rounded-full z-10",children:t.jsx(G,{size:16})}),t.jsx("button",{onClick:h=>{h.preventDefault(),I(e._id,e.images)},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 p-2 rounded-full z-10",children:t.jsx(M,{size:16})})]})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:e.name}),t.jsx("p",{className:"text-gray-400 mb-4 line-clamp-2",children:e.description}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-2xl text-cyan-400 font-bold",children:["â‚¹",e.price.toLocaleString()]}),t.jsxs("button",{onClick:h=>{h.preventDefault(),x({id:e._id,name:e.name,price:e.price,quantity:1,image:e.images[0]})},disabled:!e.inStock,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${e.inStock?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:[t.jsx(R,{size:18}),e.inStock?"Add to Cart":"Out of Stock"]})]})]})]})},e._id)}),!j.length&&!d&&t.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"No products found in this category."})]}),c&&c.totalPages>1&&t.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex justify-center items-center gap-2 mt-12",children:[t.jsx("button",{onClick:()=>N(o-1),disabled:o===1,className:"px-4 py-2 rounded-lg bg-gray-900 text-gray-400 border border-cyan-500/20 disabled:opacity-50 disabled:cursor-not-allowed hover:border-cyan-500/50 transition-all",children:"Previous"}),Array.from({length:Math.min(5,c.totalPages)},(e,i)=>{let r;const b=c.currentPage,m=c.totalPages;return m<=5||b<=3?r=i+1:b>=m-2?r=m-4+i:r=b-2+i,t.jsx("button",{onClick:()=>N(r),className:`w-10 h-10 rounded-lg transition-all ${o===r?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"bg-gray-900 text-gray-400 border border-cyan-500/20 hover:border-cyan-500/50"}`,children:r},r)}),t.jsx("button",{onClick:()=>N(o+1),disabled:o===c.totalPages,className:"px-4 py-2 rounded-lg bg-gray-900 text-gray-400 border border-cyan-500/20 disabled:opacity-50 disabled:cursor-not-allowed hover:border-cyan-500/50 transition-all",children:"Next"})]}),c&&t.jsxs("p",{className:"text-center text-gray-500 mt-6",children:["Showing ",j.length," of ",c.totalProducts," products"]})]})})}export{W as Products,W as default};
