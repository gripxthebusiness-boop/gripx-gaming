import{c as h,r as l,j as e,m as H,X as z}from"./index-HZigOWmi.js";import{C as V}from"./circle-alert-C0BicFiP.js";import{C as U}from"./circle-check-big-Bs6dQCsk.js";import{P as M}from"./package-C4Fkl4d4.js";import{S as K}from"./save-LVjygK_L.js";import{T as J}from"./trash-2-DoAmIZhM.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],X=h("loader-circle",W);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],N=h("plus",G);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Z=h("square-pen",Y);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],te=h("table",ee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],ae=h("trash",se);function xe(){console.log("API_BASE:","");const[k,$]=l.useState([]),[F,B]=l.useState(!0),[w,d]=l.useState(null),[S,A]=l.useState(null),[y,P]=l.useState(!1),[m,C]=l.useState(null),[I,b]=l.useState(!1),[u,p]=l.useState([{key:"",value:""}]),[a,c]=l.useState({name:"",brand:"",price:"",images:[""],description:"",category:"",rating:"4.5",inStock:!0,stockQuantity:""});l.useEffect(()=>{f()},[]);const f=async()=>{d(null);try{const t=localStorage.getItem("token"),s=await fetch("/products",{headers:t?{Authorization:`Bearer ${t}`}:void 0});if(s.ok){const n=await s.json();$(n)}else d("Failed to load products")}catch(t){console.error("Failed to fetch products:",t),d("Failed to load products")}finally{B(!1)}},Q=t=>{if(!t)return[{key:"",value:""}];const s=t.split(`
`),n=[];return s.forEach(r=>{if(r.includes(":")){const o=r.indexOf(":"),x=r.substring(0,o),i=r.substring(o+1);(x.trim()||i.trim())&&n.push({key:x.trim(),value:i.trim()})}else if(r.includes("-")&&!r.startsWith("-")){const o=r.indexOf("-"),x=r.substring(0,o),i=r.substring(o+1);(x.trim()||i.trim())&&n.push({key:x.trim(),value:i.trim()})}else r.trim()&&n.push({key:"",value:r.trim()})}),n.length>0?n:[{key:"",value:""}]},T=t=>t.filter(s=>s.key||s.value).map(s=>`${s.key}: ${s.value}`).join(`
`),q=async t=>{t.preventDefault(),P(!0),d(null),A(null);const s=T(u),n=a.stockQuantity?parseInt(a.stockQuantity):null,r={...a,price:parseFloat(a.price),rating:parseFloat(a.rating),specs:s,stockQuantity:n};console.log("Submitting product data:",r);try{const o=m?`/products/${m._id}`:"/products",x=m?"PUT":"POST",i=localStorage.getItem("token");if(console.log("Submitting to:",o,"Method:",x),console.log("Token present:",!!i),!i)throw new Error("Authentication required. Please log in as an admin.");const v=await fetch(o,{method:x,headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(r)}),E=await v.json();if(console.log("Response:",v.status,E),v.ok){const g=m?"Product updated successfully!":`Product "${a.name}" created successfully!`;A(g),console.log("Product saved successfully:",g),f(),j()}else{const g=E.message||`Failed to ${m?"update":"create"} product`;d(g),console.error("Error saving product:",g)}}catch(o){console.error("Failed to save product:",o),d(o.message||"Failed to save product. Please check your connection and try again.")}finally{P(!1)}},L=async t=>{if(confirm("Are you sure you want to delete this product?"))try{const s=localStorage.getItem("token");(await fetch(`/products/${t}`,{method:"DELETE",headers:s?{Authorization:`Bearer ${s}`}:void 0})).ok?f():d("Failed to delete product")}catch(s){console.error("Failed to delete product:",s),d("Failed to delete product")}},j=()=>{c({name:"",brand:"",price:"",images:[""],description:"",category:"",rating:"4.5",inStock:!0,stockQuantity:""}),p([{key:"",value:""}]),C(null),b(!1)},D=t=>{var s;C(t),c({name:t.name,brand:t.brand||"",price:t.price.toString(),images:t.images||[""],description:t.description||"",category:t.category,rating:t.rating.toString(),inStock:t.inStock,stockQuantity:((s=t.stockQuantity)==null?void 0:s.toString())||""}),p(Q(t.specs)),b(!0)},O=()=>{p([...u,{key:"",value:""}])},R=t=>{if(u.length>1){const s=u.filter((n,r)=>r!==t);p(s)}},_=(t,s,n)=>{const r=[...u];r[t]={...r[t],[s]:n},p(r)};return F?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"text-cyan-400",children:"Loading products..."})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Product Management"}),e.jsxs("button",{onClick:()=>b(!I),className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg hover:from-cyan-600 hover:to-blue-700 transition-all",children:[e.jsx(N,{size:20}),e.jsx("span",{children:"Add Product"})]})]}),w&&e.jsxs("div",{className:"mb-4 px-4 py-3 rounded-lg border border-red-500/40 bg-red-500/10 text-red-200 flex items-center space-x-2",children:[e.jsx(V,{size:18}),e.jsx("span",{children:w})]}),S&&e.jsxs("div",{className:"mb-4 px-4 py-3 rounded-lg border border-green-500/40 bg-green-500/10 text-green-200 flex items-center space-x-2",children:[e.jsx(U,{size:18}),e.jsx("span",{children:S})]}),I&&e.jsxs(H.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-gray-900 to-black border border-cyan-500/30 rounded-xl p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:m?"Edit Product":"Add New Product"}),e.jsx("button",{onClick:j,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(z,{size:24})})]}),e.jsxs("form",{onSubmit:q,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Product Name"}),e.jsx("input",{type:"text",value:a.name,onChange:t=>c({...a,name:t.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:border-cyan-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Brand"}),e.jsx("input",{type:"text",value:a.brand,onChange:t=>c({...a,brand:t.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:border-cyan-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Price (₹)"}),e.jsx("input",{type:"number",step:"0.01",value:a.price,onChange:t=>c({...a,price:t.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:border-cyan-500 focus:outline-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category"}),e.jsxs("select",{value:a.category,onChange:t=>c({...a,category:t.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:border-cyan-500 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Mice",children:"Mice"}),e.jsx("option",{value:"Keyboards",children:"Keyboards"}),e.jsx("option",{value:"Headsets",children:"Headsets"}),e.jsx("option",{value:"Monitors",children:"Monitors"}),e.jsx("option",{value:"Accessories",children:"Accessories"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Product Images"}),a.images.map((t,s)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"url",value:t,onChange:n=>{const r=[...a.images];r[s]=n.target.value,c({...a,images:r})},className:"flex-1 px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:border-cyan-500 focus:outline-none",placeholder:"Enter image URL",required:s===0}),a.images.length>1&&e.jsx("button",{type:"button",onClick:()=>{const n=a.images.filter((r,o)=>o!==s);c({...a,images:n})},className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:e.jsx(z,{size:16})})]},s)),e.jsxs("button",{type:"button",onClick:()=>c({...a,images:[...a.images,""]}),className:"flex items-center space-x-2 px-4 py-2 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition-colors",children:[e.jsx(N,{size:16}),e.jsx("span",{children:"Add Another Image"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:t=>c({...a,description:t.target.value}),rows:3,className:"w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:border-cyan-500 focus:outline-none"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{size:16}),e.jsx("span",{children:"Specifications"})]})}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg overflow-hidden border border-gray-600",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Specification"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Value"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase w-16",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:u.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-2",children:e.jsx("input",{type:"text",value:t.key,onChange:n=>_(s,"key",n.target.value),placeholder:"e.g., Sensor",className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm focus:border-cyan-500 focus:outline-none"})}),e.jsx("td",{className:"px-2 py-2",children:e.jsx("input",{type:"text",value:t.value,onChange:n=>_(s,"value",n.target.value),placeholder:"e.g., Optical",className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm focus:border-cyan-500 focus:outline-none"})}),e.jsx("td",{className:"px-2 py-2",children:e.jsx("button",{type:"button",onClick:()=>R(s),disabled:u.length===1,className:"p-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(ae,{size:16})})})]},s))})]}),e.jsx("div",{className:"p-3 border-t border-gray-700",children:e.jsxs("button",{type:"button",onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-cyan-600/20 text-cyan-400 rounded-lg hover:bg-cyan-600/30 transition-colors text-sm",children:[e.jsx(N,{size:16}),"Add Specification"]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{size:16}),e.jsx("span",{children:"Stock Quantity"})]})}),e.jsx("input",{type:"number",min:"0",value:a.stockQuantity,onChange:t=>c({...a,stockQuantity:t.target.value}),placeholder:"Leave empty for unlimited",className:"w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:border-cyan-500 focus:outline-none"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to not show stock count to customers"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.inStock,onChange:t=>c({...a,inStock:t.target.checked}),className:"w-5 h-5 rounded border-gray-600 text-cyan-500 focus:ring-cyan-500 bg-gray-800"}),e.jsx("span",{className:"text-gray-300",children:"Product is in stock"})]})}),e.jsxs("div",{className:"md:col-span-2 flex justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:j,disabled:y,className:"px-6 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg hover:from-cyan-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:y?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:18,className:"animate-spin"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{size:18}),e.jsx("span",{children:m?"Update Product":"Create Product"})]})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black border border-cyan-500/30 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Brand"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:k.map(t=>{var s;return e.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:((s=t.images)==null?void 0:s[0])||"",alt:t.name})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:t.name}),e.jsx("div",{className:"text-sm text-gray-400 truncate max-w-xs",children:t.category})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:t.brand||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-cyan-400",children:["₹",t.price]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ${t.inStock?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.inStock?"In Stock":"Out of Stock"}),t.inStock&&t.stockQuantity!==null&&e.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[t.stockQuantity," units"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>D(t),className:"text-cyan-400 hover:text-cyan-300 transition-colors",children:e.jsx(Z,{size:18})}),e.jsx("button",{onClick:()=>L(t._id),className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx(J,{size:18})})]})})]},t._id)})})]})}),k.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(M,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No products found. Add your first product to get started."})]})]})]})})}export{xe as AdminProducts,xe as default};
