var te=Object.defineProperty,ne=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var Q=(s,r,t)=>r in s?te(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,u=(s,r)=>{for(var t in r||(r={}))ce.call(r,t)&&Q(s,t,r[t]);if(K)for(var t of K(r))oe.call(r,t)&&Q(s,t,r[t]);return s},p=(s,r)=>ne(s,le(r));var N=(s,r,t)=>new Promise((v,w)=>{var P=c=>{try{x(t.next(c))}catch(d){w(d)}},b=c=>{try{x(t.throw(c))}catch(d){w(d)}},x=c=>c.done?v(c.value):Promise.resolve(c.value).then(P,b);x((t=t.apply(s,r)).next())});import{c as Z,x as de,r as l,j as e,U,X as ie,C as xe}from"./index-DRvYSPvI.js";import{S as me}from"./shield-DZh5WSd-.js";import{S as he}from"./save-q0fVo5dr.js";import{M as ue}from"./mail-De50DBqH.js";import{P as pe}from"./phone-Iox_9iVU.js";import{L as V,E as I,a as O}from"./lock-Dwm-sTkG.js";import{T as _}from"./trash-2-CLojDynL.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],W=Z("check",ge);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],z=Z("triangle-alert",we);function Ce(){const{user:s,loading:r,error:t,updateProfile:v,changePassword:w,deleteAccount:P,clearError:b,validatePasswordStrength:x}=de(),[c,d]=l.useState(!1),[f,S]=l.useState({username:"",email:"",phone:""}),[$,C]=l.useState(null),[F,k]=l.useState(null),[R,E]=l.useState(!1),[o,D]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[m,A]=l.useState({current:!1,new:!1,confirm:!1}),[X,h]=l.useState(null),[Y,y]=l.useState(null),[n,B]=l.useState(null),[ee,G]=l.useState(!1),[j,H]=l.useState(""),[J,g]=l.useState(null);l.useEffect(()=>{s&&S({username:s.username||"",email:s.email||"",phone:s.phone||""})},[s]),l.useEffect(()=>{b(),C(null),k(null),h(null),y(null),g(null)},[s,b]),l.useEffect(()=>{o.newPassword?B(x(o.newPassword)):B(null)},[o.newPassword,x]);const q=a=>{const{name:i,value:M}=a.target;S(T=>p(u({},T),{[i]:M}))},se=a=>N(null,null,function*(){a.preventDefault(),C(null),k(null);try{yield v(f),k("Profile updated successfully!"),d(!1)}catch(i){C(i.message)}}),L=a=>{const{name:i,value:M}=a.target;D(T=>p(u({},T),{[i]:M}))},re=a=>N(null,null,function*(){if(a.preventDefault(),h(null),y(null),o.newPassword!==o.confirmPassword){h("New passwords do not match");return}if(o.currentPassword===o.newPassword){h("New password must be different from current password");return}try{yield w(o.currentPassword,o.newPassword),y("Password changed successfully!"),D({currentPassword:"",newPassword:"",confirmPassword:""}),E(!1)}catch(i){h(i.message)}}),ae=()=>N(null,null,function*(){if(g(null),!j){g("Please enter your password to confirm account deletion");return}try{yield P(j)}catch(a){g(a.message)}});return s?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black pt-24 px-6 pb-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center",children:e.jsx(U,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Account Settings"}),e.jsx("p",{className:"text-gray-400",children:"Manage your profile and account preferences"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black border border-cyan-500/20 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-cyan-500/10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(me,{className:"w-5 h-5 text-cyan-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Profile Information"})]}),c?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{d(!1),S({username:s.username||"",email:s.email||"",phone:s.phone||""})},className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(ie,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:se,disabled:r,className:"flex items-center space-x-2 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors disabled:opacity-50",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]})]}):e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 text-sm font-medium text-cyan-400 hover:text-cyan-300 transition-colors",children:"Edit Profile"})]}),e.jsxs("div",{className:"p-6",children:[F&&e.jsxs("div",{className:"mb-4 p-4 bg-green-500/10 border border-green-500/20 rounded-lg flex items-center space-x-3",children:[e.jsx(W,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-green-400",children:F})]}),$&&e.jsxs("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center space-x-3",children:[e.jsx(z,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:"text-red-400",children:$})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:"Username"})]}),c?e.jsx("input",{type:"text",name:"username",value:f.username,onChange:q,className:"w-full px-4 py-3 bg-gray-800/50 border border-cyan-500/20 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors"}):e.jsx("p",{className:"px-4 py-3 bg-gray-800/30 rounded-lg text-white font-medium",children:s.username})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Email"})]}),c?e.jsx("input",{type:"email",name:"email",value:f.email,onChange:q,className:"w-full px-4 py-3 bg-gray-800/50 border border-cyan-500/20 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors"}):e.jsx("p",{className:"px-4 py-3 bg-gray-800/30 rounded-lg text-white font-medium",children:s.email})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Phone Number"})]}),c?e.jsx("input",{type:"tel",name:"phone",value:f.phone,onChange:q,placeholder:"Enter your phone number",className:"w-full px-4 py-3 bg-gray-800/50 border border-cyan-500/20 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors"}):e.jsx("p",{className:"px-4 py-3 bg-gray-800/30 rounded-lg text-white font-medium",children:s.phone||"Not set"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black border border-cyan-500/20 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-cyan-500/10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(V,{className:"w-5 h-5 text-cyan-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Password"})]}),!R&&e.jsx("button",{onClick:()=>E(!0),className:"px-4 py-2 text-sm font-medium text-cyan-400 hover:text-cyan-300 transition-colors",children:"Change Password"})]}),e.jsx("div",{className:"p-6",children:R?e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[Y&&e.jsxs("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg flex items-center space-x-3",children:[e.jsx(W,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-green-400",children:Y})]}),X&&e.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center space-x-3",children:[e.jsx(z,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:"text-red-400",children:X})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m.current?"text":"password",name:"currentPassword",value:o.currentPassword,onChange:L,required:!0,className:"w-full px-4 py-3 bg-gray-800/50 border border-cyan-500/20 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors pr-12"}),e.jsx("button",{type:"button",onClick:()=>A(a=>p(u({},a),{current:!a.current})),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:m.current?e.jsx(I,{className:"w-5 h-5"}):e.jsx(O,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m.new?"text":"password",name:"newPassword",value:o.newPassword,onChange:L,required:!0,className:"w-full px-4 py-3 bg-gray-800/50 border border-cyan-500/20 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors pr-12"}),e.jsx("button",{type:"button",onClick:()=>A(a=>p(u({},a),{new:!a.new})),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:m.new?e.jsx(I,{className:"w-5 h-5"}):e.jsx(O,{className:"w-5 h-5"})})]}),n&&e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${n.strength==="strong"?"bg-green-500 w-full":n.strength==="good"?"bg-cyan-500 w-3/4":n.strength==="fair"?"bg-yellow-500 w-1/2":"bg-red-500 w-1/4"}`})}),e.jsx("span",{className:`text-sm font-medium capitalize ${n.strength==="strong"?"text-green-400":n.strength==="good"?"text-cyan-400":n.strength==="fair"?"text-yellow-400":"text-red-400"}`,children:n.strength})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-400",children:[e.jsxs("span",{className:n.requirements.minLength?"text-green-400":"",children:[n.requirements.minLength?"✓":"○"," At least 8 characters"]}),e.jsxs("span",{className:n.requirements.hasUppercase?"text-green-400":"",children:[n.requirements.hasUppercase?"✓":"○"," One uppercase letter"]}),e.jsxs("span",{className:n.requirements.hasLowercase?"text-green-400":"",children:[n.requirements.hasLowercase?"✓":"○"," One lowercase letter"]}),e.jsxs("span",{className:n.requirements.hasNumber?"text-green-400":"",children:[n.requirements.hasNumber?"✓":"○"," One number"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m.confirm?"text":"password",name:"confirmPassword",value:o.confirmPassword,onChange:L,required:!0,className:"w-full px-4 py-3 bg-gray-800/50 border border-cyan-500/20 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors pr-12"}),e.jsx("button",{type:"button",onClick:()=>A(a=>p(u({},a),{confirm:!a.confirm})),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:m.confirm?e.jsx(I,{className:"w-5 h-5"}):e.jsx(O,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 pt-4",children:[e.jsxs("button",{type:"submit",disabled:r,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg hover:from-cyan-600 hover:to-blue-700 transition-colors disabled:opacity-50",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:r?"Changing...":"Change Password"})]}),e.jsx("button",{type:"button",onClick:()=>{E(!1),D({currentPassword:"",newPassword:"",confirmPassword:""}),h(null),y(null)},className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"})]})]}):e.jsx("p",{className:"text-gray-400",children:"Password last changed: Never"})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black border border-cyan-500/20 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-cyan-500/10 flex items-center space-x-3",children:[e.jsx(xe,{className:"w-5 h-5 text-cyan-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Session Information"})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"p-4 bg-gray-800/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Account Type"}),e.jsx("p",{className:"text-white font-medium capitalize",children:s.role||"Customer"})]}),e.jsxs("div",{className:"p-4 bg-gray-800/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Member Since"}),e.jsx("p",{className:"text-white font-medium",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"p-4 bg-gray-800/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Last Updated"}),e.jsx("p",{className:"text-white font-medium",children:s.updatedAt?new Date(s.updatedAt).toLocaleDateString():"N/A"})]})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-900/20 to-black border border-red-500/20 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-red-500/10 flex items-center space-x-3",children:[e.jsx(_,{className:"w-5 h-5 text-red-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Delete Account"})]}),e.jsx("div",{className:"p-6",children:ee?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:[e.jsx("p",{className:"text-red-400 font-medium",children:"Are you sure you want to delete your account?"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"This will permanently delete your account, and you will be logged out."})]}),J&&e.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center space-x-3",children:[e.jsx(z,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:"text-red-400",children:J})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Enter your password to confirm"}),e.jsx("input",{type:"password",value:j,onChange:a=>H(a.target.value),placeholder:"Your password",className:"w-full px-4 py-3 bg-gray-800/50 border border-red-500/20 rounded-lg text-white focus:outline-none focus:border-red-500 transition-colors"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:ae,disabled:r||!j,className:"flex items-center space-x-2 px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:r?"Deleting...":"Confirm Delete"})]}),e.jsx("button",{onClick:()=>{G(!1),H(""),g(null)},className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-300",children:"Permanently delete your account and all associated data."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This action cannot be undone."})]}),e.jsxs("button",{onClick:()=>G(!0),className:"flex items-center space-x-2 px-4 py-2 bg-red-500/10 text-red-400 border border-red-500/20 rounded-lg hover:bg-red-500/20 transition-colors",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete Account"})]})]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black pt-24 px-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto bg-gradient-to-br from-gray-900 to-black border border-cyan-500/20 rounded-xl p-8 text-center",children:[e.jsx(U,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Sign In Required"}),e.jsx("p",{className:"text-gray-400",children:"Please sign in to view and manage your account."})]})})}export{Ce as default};
