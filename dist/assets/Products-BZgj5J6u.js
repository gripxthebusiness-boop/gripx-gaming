import{r as h,u as S,j as t,m as d,L as A,S as I}from"./index-HZigOWmi.js";import{u as L,C as _}from"./chevron-left-Qx71AIIp.js";import{L as F,C as z}from"./LazyImage-YM4y_6AV.js";function R(){const[g,f]=h.useState("All"),[j,y]=h.useState({}),[n,u]=h.useState(1),{addToCart:N}=S(),{data:i,isLoading:p,error:m,isFetching:v}=L({queryKey:["products",g,n],queryFn:async()=>{const e=new URLSearchParams({page:n.toString(),limit:"9"});g!=="All"&&e.append("category",g);const s=await fetch(`/products?${e}`);if(!s.ok)throw new Error("Failed to fetch products");return s.json()},staleTime:300*1e3}),x=(i==null?void 0:i.products)||[],r=i==null?void 0:i.pagination,w=(e,s)=>{y(a=>({...a,[e]:((a[e]||0)+1)%s.length}))},C=(e,s)=>{y(a=>({...a,[e]:a[e]===0?s.length-1:(a[e]||0)-1}))},k=["All","Mice","Keyboards","Headsets","Controllers"],b=e=>{u(e),window.scrollTo({top:0,behavior:"smooth"})},P=e=>{f(e),u(1)};return p&&!i?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-cyan-400",children:"Loading products..."})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black pt-24 pb-12",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[t.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:[t.jsxs("h1",{className:"text-5xl font-bold text-white mb-4",children:[t.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-600",children:"Premium"})," ","Gaming Gear"]}),t.jsx("p",{className:"text-gray-400 text-lg",children:"Curated gaming gear from trusted brands in India"})]}),m&&t.jsx("div",{className:"mb-6 px-4 py-3 rounded-lg border border-red-500/40 bg-red-500/10 text-red-200",children:m instanceof Error?m.message:"Unable to load products right now."}),t.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-wrap gap-4 mb-12",children:k.map(e=>t.jsx("button",{onClick:()=>P(e),className:`px-6 py-2 rounded-lg transition-all ${g===e?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"bg-gray-900 text-gray-400 border border-cyan-500/20 hover:border-cyan-500/50"}`,children:e},e))}),v&&t.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4 px-4 py-2 rounded-lg bg-cyan-500/10 text-cyan-400 text-center",children:"Updating products..."}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[x.map((e,s)=>{var l;const a=j[e._id]||0,o=((l=e.images)==null?void 0:l[a])||"";return t.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.05},className:"group",children:t.jsxs(A,{to:`/products/${e._id}`,className:"block relative overflow-hidden rounded-xl bg-gradient-to-br from-gray-900 to-black border border-cyan-500/20 hover:border-cyan-500/50 transition-all",children:[t.jsxs("div",{className:"relative h-64 overflow-hidden",children:[t.jsx(F,{src:o,alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.images.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:c=>{c.preventDefault(),C(e._id,e.images)},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 p-2 rounded-full z-10",children:t.jsx(_,{size:16})}),t.jsx("button",{onClick:c=>{c.preventDefault(),w(e._id,e.images)},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 p-2 rounded-full z-10",children:t.jsx(z,{size:16})})]})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:e.name}),t.jsx("p",{className:"text-gray-400 mb-4 line-clamp-2",children:e.description}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-2xl text-cyan-400 font-bold",children:["â‚¹",e.price.toLocaleString()]}),t.jsxs("button",{onClick:c=>{c.preventDefault(),N({id:e._id,name:e.name,price:e.price,quantity:1,image:e.images[0]})},disabled:!e.inStock,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${e.inStock?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:[t.jsx(I,{size:18}),e.inStock?"Add to Cart":"Out of Stock"]})]})]})]})},e._id)}),!x.length&&!p&&t.jsx("div",{className:"col-span-full text-center text-gray-400 py-12",children:"No products found in this category."})]}),r&&r.totalPages>1&&t.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex justify-center items-center gap-2 mt-12",children:[t.jsx("button",{onClick:()=>b(n-1),disabled:n===1,className:"px-4 py-2 rounded-lg bg-gray-900 text-gray-400 border border-cyan-500/20 disabled:opacity-50 disabled:cursor-not-allowed hover:border-cyan-500/50 transition-all",children:"Previous"}),Array.from({length:Math.min(5,r.totalPages)},(e,s)=>{let a;const o=r.currentPage,l=r.totalPages;return l<=5||o<=3?a=s+1:o>=l-2?a=l-4+s:a=o-2+s,t.jsx("button",{onClick:()=>b(a),className:`w-10 h-10 rounded-lg transition-all ${n===a?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white":"bg-gray-900 text-gray-400 border border-cyan-500/20 hover:border-cyan-500/50"}`,children:a},a)}),t.jsx("button",{onClick:()=>b(n+1),disabled:n===r.totalPages,className:"px-4 py-2 rounded-lg bg-gray-900 text-gray-400 border border-cyan-500/20 disabled:opacity-50 disabled:cursor-not-allowed hover:border-cyan-500/50 transition-all",children:"Next"})]}),r&&t.jsxs("p",{className:"text-center text-gray-500 mt-6",children:["Showing ",x.length," of ",r.totalProducts," products"]})]})})}export{R as Products,R as default};
